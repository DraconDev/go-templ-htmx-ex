// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

//go:generate templ generate
func AuthCallbackContent() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Authenticating...</title><script src=\"https://unpkg.com/htmx.org@1.9.10\"></script><script src=\"https://cdn.tailwindcss.com\"></script><style>\n\t\t\t\t/* Custom animations and styles */\n\t\t\t\t@keyframes gradientShift {\n\t\t\t\t\t0% { background-position: 0% 50%; }\n\t\t\t\t\t50% { background-position: 100% 50%; }\n\t\t\t\t\t100% { background-position: 0% 50%; }\n\t\t\t\t}\n\t\t\t\t.gradient-bg {\n\t\t\t\t\tbackground: linear-gradient(-45deg, #3b82f6, #8b5cf6, #06b6d4, #10b981);\n\t\t\t\t\tbackground-size: 400% 400%;\n\t\t\t\t\tanimation: gradientShift 8s ease infinite;\n\t\t\t\t}\n\t\t\t</style></head><body class=\"gradient-bg min-h-screen flex items-center justify-center\"><div class=\"max-w-2xl mx-auto text-center\"><div class=\"bg-white/90 backdrop-blur-lg rounded-2xl shadow-2xl p-8\"><div class=\"mb-6\"><div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto\"></div></div><h2 class=\"text-2xl font-bold text-gray-900 mb-4\">Setting up your session...</h2><p class=\"text-gray-600 mb-6\">Please wait while we authenticate you with Google.</p><div id=\"error-message\" class=\"hidden text-red-600 bg-red-100 border border-red-400 px-4 py-3 rounded-lg mb-4\"></div><div id=\"success-message\" class=\"hidden text-green-600 bg-green-100 border border-green-400 px-4 py-3 rounded-lg mb-4\"></div></div></div><script>\n\t\t\t\t// Function to parse URL fragment\n\t\t\t\tfunction parseFragment() {\n\t\t\t\t\tvar fragment = window.location.hash.substring(1); // Remove #\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (fragment) {\n\t\t\t\t\t\tvar pairs = fragment.split('&');\n\t\t\t\t\t\tfor (var i = 0; i < pairs.length; i++) {\n\t\t\t\t\t\t\tvar pair = pairs[i].split('=');\n\t\t\t\t\t\t\tparams[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn params;\n\t\t\t\t}\n\n\t\t\t\t// Function to set session and redirect\n\t\t\t\tfunction setSessionAndRedirect() {\n\t\t\t\t\tvar params = parseFragment();\n\t\t\t\t\tvar accessToken = params['access_token'];\n\t\t\t\t\t\n\t\t\t\t\tif (!accessToken) {\n\t\t\t\t\t\tshowError('No access token found in URL. Please try logging in again.');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set session cookie via server endpoint\n\t\t\t\t\tfetch('/api/auth/set-session', {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({ token: accessToken })\n\t\t\t\t\t})\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\t\tshowSuccess('Authentication successful! Redirecting to home...');\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\twindow.location.href = '/';\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn response.json().then(data => {\n\t\t\t\t\t\t\t\tthrow new Error(data.error || 'Failed to set session');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\tshowError('Error: ' + error.message);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction showError(message) {\n\t\t\t\t\tvar errorDiv = document.getElementById('error-message');\n\t\t\t\t\terrorDiv.textContent = message;\n\t\t\t\t\terrorDiv.classList.remove('hidden');\n\t\t\t\t}\n\n\t\t\t\tfunction showSuccess(message) {\n\t\t\t\t\tvar successDiv = document.getElementById('success-message');\n\t\t\t\t\tsuccessDiv.textContent = message;\n\t\t\t\t\tsuccessDiv.classList.remove('hidden');\n\t\t\t\t}\n\n\t\t\t\t// Run when page loads\n\t\t\t\tsetSessionAndRedirect();\n\t\t\t</script></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
